## Урок 10. Возможна ли жизнь без PIP? 
#### Продолжение 
* Прикрутить бота к задачам с предыдущего семинара:  
* или Информационная система  
* или Телефонный справочник с возможностями работы с информацией,  
* и экспорта информацииtg_bot  телефонный справочник

# БОТ
## бот позволяет работать в режиме калькулятора и режиме телефонного справочника
1. окно подсказки основного меню. вызывается командой 
```/help``` 

```
/start
/calc_start работа с калькулятором
/phone_book работа с телефонной книгой
/esc закончить работу

 сделайте ваш выбор: ...
```

2. Окно подсказки в работе с калькулятором. вызывается командой ```/help```  
в режиме работы с калькулятором:
```
/calc_start запустить вычисления
/esc закончить работу с калькулятором
```
3. Окно  подсказки в работе с телефонной книгой.```/help```  
в режиме работы с телефонной книгой:
    
```
выбор:
/add добавить контакт
/view посмотреть контакты
/contact выбрать и посмотреть контакт
/edit редактировать контакт
/delete удалить контакт
/save сохоранить изменения
/esc закончить работу с телефонным справочником

 сделайте ваш выбор: ...
 ```

4. добавить контакт. используем команду 
```
/add
```
далее:
```
введите данные контакта через запятую,
типа: Семенов, г.Москва, (812)-333-12-21, Семенов@почты.нет
```
5. Посмотреть введенные контакты. используем команду 
```
/view
```
видим телефонную книгу в формате json
```
{
    "Rafael": {
        "address": "SPB",
        "phone": "311",
        "email": "rra@gm.com"
    },
    "Sveta": {
        "address": "SPB",
        "phone": "244-12-12",
        "email": "sd@gm.com"
    },
    "Иванов": {
        "address": " на перекрестке",
        "phone": " 3-62",
        "email": " кружки@пива.нет"
    },
    "Семенов": {
        "address": " г.Москва",
        "phone": " (812)-333-12-21",
        "email": " Семенов@почты.нет"
    }
}
```
6. удалить контакт. сначала нужно выбрать удаляемый контакт.  

используем команду
```
/contact
```
далее:
```
введите имя контакта:
```
вводим:
```
Семенов
```
выводится информация о Семенове
```
Семенов :
address :  г.Москваphone :  (812)-333-12-21email :  Семенов@почты.нет
```
если это он, то вводим команду
```
/delete
```
увидим подтверждение:
```
Семенов: удален
```
7. выходим из режима телефонного справочника:
`
/esc
`

8. Вся работа протоколируется в log файл. Кусок лога.
`
21:03:40,991 INFO  12/07/22:03:2022 ; 21:03:40:, message.chat.id: 416170550, , message:'15/3', phone_flag: False, mainwin_flag: False, calc_flag: True, action_status: calc
2022-12-07 21:03:41,533 INFO  12/07/22:03:2022 ; 21:03:41:, message:'15/3 = 5.0', phone_flag: False, mainwin_flag: False, calc_flag: True, action_status: calc
2022-12-07 21:03:44,306 INFO  12/07/22:03:2022 ; 21:03:44:, message.chat.id: 416170550, , message:'/esc', phone_flag: False, mainwin_flag: False, calc_flag: True, action_status: calc
2022-12-07 
`


## --Далее нформация для внутреннего потребления --
##### за основу взят предыдущий телеграмм бот
_используется виртуальное окружение,  
описание выгружено в файл requirement.txt_  

` pip freeze > requirements.txt `

вместо декораторов использую конструкцию: 
`bot.register_message_handler(start_executor, commands=['start'])`


АвтоТЗ:  
1. Телефонный справочник хранится в JSON  
2. Будем хранить:   
`
Фамилию  
Имя    
Номер телефона   
`
_(большее число полей не поменяет сложности решения)_







# tg_bot
Программа tg_bot, реализованная в боте iToora_bot, 
позволяет работать 
с калькулятором в боте. 
Расчет производится вызовом команды /calc  
с последущим выражением для расчета:
например, `/calc 25*4/20 +5*(2+2)`

## памятка для повторения кода в будущем
telebot & discord_bot

настройка venv. Инсталляция библиотеки telegram
PyCharm:
* Preference->Python Interpreter->Add Interpreter->
* -> Add Local Interpreter ->
* -> Virtualenv Environment (new)
* В проекте появится каталог venv
* обновить Терминал (например перезапуском проекта). 
* В коммандной строке появится префикс (venv)  

Обновляем pip python -m pip install --upgrade pip
Добавляем библиотеки:  

`pip install telebot`  
`pip install pyTelegramBotAPI` 
(это будет версия 4.7.1 С ней, пока, все работает)

Запускаем Telegram BotFather  
Создаем новый bot  
даем ему имя  
Получаем Токен
